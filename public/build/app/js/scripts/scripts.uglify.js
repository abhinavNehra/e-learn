function doGet($resource,url,opt,callback){var data={id:1,name:"Leanne Graham",username:"Bret",email:"Sincere@april.biz",address:{street:"Kulas Light",suite:"Apt. 556",city:"Gwenborough",zipcode:"92998-3874",geo:{lat:"-37.3159",lng:"81.1496"}},phone:"1-770-736-8031 x56442",website:"hildegard.org",company:{name:"Romaguera-Crona",catchPhrase:"Multi-layered client-server neural-net",bs:"harness real-time e-markets"}};callback(data),$resource(url,{},{query:{method:"GET",isArray:!0}})}app.factory("focus",function($timeout){return function(id){$timeout(function(){var element=document.getElementById(id);element&&element.focus()},400)}}),app.filter("capitalize",function(){return function(input){return input?input[0].toUpperCase()+input.slice(1):void 0}}),app.directive("confirmClick",function(){return{link:function(scope,element,attrs){scope.confirmClick=function(msg){return msg=msg||attrs.confirmClick||frontendSettings.confirmDeleteActivity,confirm(msg)}}}}),app.directive("confirmClickDelete",function(){return{link:function(scope,element,attrs){scope.confirmClick=function(msg){return msg=msg||attrs.confirmClick||frontendSettings.confirmDeleteAccount,confirm(msg)}}}}),app.directive("confirmClickComment",function(){return{link:function(scope,element,attrs){scope.confirmClick=function(msg){return msg=msg||attrs.confirmClick||frontendSettings.confirmDeleteComment,confirm(msg)}}}}),app.directive("showProgressBar",function(){return{restrict:"E",template:'<img src="assets/img/proceed.gif" alt="processing..." />'}}),app.controller("actionController",["$rootScope","$scope","$timeout","getActionService","saveCompleteActionService",function($rootScope,$scope,$timeout,getActionService,saveCompleteActionService){$scope.getAction={},$scope.showActionList=!1,$scope.loaderShowA=!0,$scope.selectSaveActionList=[],$scope.activeAction=!0,$scope.activeProfile=!1,$scope.actionLoader=!1,$scope.resultAction=!1,$rootScope.$emit("callHeaderController",!0),$scope.getUserActions=function(){getActionService.query(function(data){$scope.loaderShowA=!1,200===data.statusCode&&"ok"===data.message&&data.result.length>0&&($scope.showActionList=!0,$scope.getAction=data.result)},function(error){console.log("error",error)})},$scope.getUserActions(),$scope.toggleCheckSaveAction=function(id){$scope.actionLoader=!0}}]),app.factory("getActionService",function($resource){return $resource(APP.endpoints.actionSave,{},{query:{method:"GET",isArray:!1}})}),app.factory("saveCompleteActionService",function($resource){return $resource(APP.endpoints.saveCompleteAction,{id:"@id"},{update:{method:"PUT"}})}),app.controller("homeController",["$rootScope","$scope","moduleService","lessonService","lessonDetailService","getCommunityService",function($rootScope,$scope,moduleService,lessonService,lessonDetailService,getCommunityService){$scope.oneAtATime=!0,$scope.showSpace=!1,$scope.showGroup=!1,$rootScope.$emit("callHeaderController",!1),$scope.showCommunity=!0,$scope.showMyspace=function(){$scope.showGroup=!1,$scope.showCommunity=!1,$scope.showSpace=!0,$scope.$broadcast("CallUpdatedSpaceMethod",{})},$scope.showMycommunity=function(){$scope.showGroup=!1,$scope.showCommunity=!0,$scope.showSpace=!1,getCommunityService.query(function(data){$scope.commloader=!1,200===data.statusCode&&"ok"===data.message&&data.result.length>0&&($scope.activityList=data.result)},function(error){console.log("error",error)})},$scope.showMyGroups=function(){$scope.showGroup=!0,$scope.showCommunity=!1,$scope.showSpace=!1}}]),app.factory("moduleService",function($resource){return $resource(APP.endpoints.module,{},{query:{method:"GET",isArray:!1}})}),app.factory("lessonService",function($resource){return $resource(APP.endpoints.lesson)}),app.factory("lessonDetailService",function($resource){return $resource(APP.endpoints.lessonDetail)}),app.controller("landingController",["$scope",function($scope){$scope.landing=!0}]),app.controller("profileController",["$rootScope","$scope","changeNameService","focus","profileService","changeEmailService","changePasswordService","changeUserDobService","$timeout","changeUserImageService","deleteAccountService","$state","registerService",function($rootScope,$scope,changeNameService,focus,profileService,changeEmailService,changePasswordService,changeUserDobService,$timeout,changeUserImageService,deleteAccountService,$state,registerService){$scope.basicProfile=function(){profileService.query(function(data){$scope.editUser=data.result.local,APP.currentUser=data.result})},$scope.basicProfile(),$scope.showErrEmail=!1,$scope.errMsg="",$scope.activeAction=!1,$scope.activeProfile=!0,$scope.nameSubmit=!1,$scope.openeditName=!1,$scope.openeditEmail=!1,$scope.emailSubmit=!1,$scope.openeditPassword=!1,$scope.passwordSubmit=!1,$scope.openeditDob=!1,$scope.dobSubmit=!1,$scope.uploadLoader=!1,$scope.noFile="",$scope.location="",$scope.uploadLoader=!1,$scope.openeditImage=!1,$scope.errorDelete=!1,$scope.popup1={opened:!1},AWS.config.region="ap-northeast-1",AWS.config.credentials=new AWS.CognitoIdentityCredentials({IdentityPoolId:"ap-northeast-1:13efca28-48cb-445d-9b50-882e3b055c2a"}),$scope.dateOptions={formatYear:"yy",startingDay:1},$scope.format="dd-MMMM-yyyy",$scope.disabled=function(date,mode){return"day"===mode&&(0===date.getDay()||6===date.getDay())},$scope.altInputFormats=["M!/d!/yyyy"],$scope.maxDate=new Date,$scope.toggleMin=function(){$scope.minDate=null},$scope.open1=function(){$scope.popup1.opened=!0},$scope.toggleMin(),$scope.openEditForm=function(index){switch(console.log("in",index),$scope.openeditImage=!1,$scope.openeditName=!1,$scope.openeditDob=!1,$scope.openeditEmail=!1,$scope.openeditPassword=!1,index){case 1:$scope.openeditImage=!0;break;case 2:$scope.openeditName=!0;break;case 3:$scope.openeditDob=!0;break;case 4:$scope.openeditEmail=!0,$scope.showErrEmail=!1,$scope.errMsg="";break;case 5:$scope.openeditPassword=!0,$scope.editUser.password=""}},$scope.changeName=function(){if($scope.nameSubmit=!0,void 0===$scope.editUser.name||""===$scope.editUser.name)return focus("name"),!1;var opts={};opts.name=$scope.editUser.name,changeNameService.update({id:APP.currentUser._id},opts,function(data){200===data.statusCode&&"ok"===data.message&&($scope.openeditName=!1,$scope.nameSubmit=!1,$scope.basicProfile())})},$scope.changeEmail=function(){return $scope.emailSubmit=!0,void 0===$scope.editUser.email||""===$scope.editUser.name?(focus("email"),!1):$scope.showErrEmail===!0?(focus("email"),!1):void registerService.save({email:$scope.editUser.email},function(data){if(200==data.statusCode&&"ok"==data.message&&"verified"==data.result.message){var opts={};opts.email=$scope.editUser.email,changeEmailService.update({id:APP.currentUser._id},opts,function(data){200===data.statusCode&&"ok"===data.message&&($scope.openeditEmail=!1,$scope.emailSubmit=!1,$scope.basicProfile())})}else 422==data.statusCode&&"email already registered"==data.message?($scope.showErrEmail=!0,$timeout(function(){$scope.showErrEmail=!1},3e3),$scope.errMsg=frontendSettings.userregistered):422==data.statusCode&&"email should be registered with any email provider"==data.message?($scope.showErrEmail=!0,$scope.errMsg=frontendSettings.domainnotValid,$timeout(function(){$scope.showErrEmail=!1},3e3)):(console.log("fdgfdgdfgdfdgfd"),$scope.showErrEmail=!0,$scope.errMsg=frontendSettings.domainnotValid,$timeout(function(){$scope.showErrEmail=!1},3e3))})},$scope.changePassword=function(){if($scope.passwordSubmit=!0,void 0===$scope.editUser.password||""===$scope.editUser.password)return focus("password"),!1;var opts={};opts.password=$scope.editUser.password,changePasswordService.update({id:APP.currentUser._id},opts,function(data){200===data.statusCode&&"ok"===data.message&&($scope.openeditPassword=!1,$scope.passwordSubmit=!1,$scope.basicProfile())})},$scope.convert=function(str){var date=new Date(str),mnth=("0"+(date.getMonth()+1)).slice(-2),day=("0"+date.getDate()).slice(-2);return[day,mnth,date.getFullYear()].join("/")},$scope.changeDob=function(){if($scope.dobSubmit=!0,void 0===$scope.dt||""===$scope.dt)return focus("dob"),!1;$scope.dob=$scope.convert($scope.dt);var opts={};opts.dob=$scope.dob,changeUserDobService.update({id:APP.currentUser._id},opts,function(data){200===data.statusCode&&"ok"===data.message&&($scope.openeditDob=!1,$scope.popup1.opened=!1,$scope.dobSubmit=!1,$scope.basicProfile())})},$scope.upload=function(element){if($scope.noFile="",$scope.imag="",$scope.showProgressBar=!1,$scope.fileModel=element.files[0],$scope.uploadLoader=!1,$scope.fileModel)if("image/jpeg"===$scope.fileModel.type||"image/png"===$scope.fileModel.type){$scope.uploadLoader=!0;var bucket=new AWS.S3({params:{Bucket:"mindmaxdaffo"}}),imageName=$scope.fileModel.name+Math.floor(Date.now()/1e3);$scope.imag=imageName;var params={Key:imageName,ContentType:$scope.fileModel.type,Body:$scope.fileModel};bucket.upload(params).on("httpUploadProgress",function(evt){$scope.barShow=parseInt(100*evt.loaded/evt.total)+"%",$scope.percentageStyle={width:$scope.barShow},$scope.$digest()}).send(function(err,data){err?($scope.uploadLoader=!1,$scope.noFile="Error in uploading file, please try again",$scope.$digest(),$timeout(function(){$scope.noFile=""},3e3)):($scope.uploadLoader=!1,$scope.showProgressBar=!0,$timeout(function(){$scope.noFile=""},3e3),$scope.location=data.Location,$scope.barShow="0%",element.value=null,$scope.$digest())})}else $scope.noFile="Please upload a image with jpeg and png format";else $scope.noFile="Please upload a file first"},$scope.changeImage=function(){if(""===$scope.location||void 0===$scope.location)return $scope.noFile="Please upload a file first",focus("image"),$timeout(function(){$scope.noFile=""},3e3),!1;var opts={};opts.avatar_url=$scope.location,changeUserImageService.update({id:APP.currentUser._id},opts,function(data){200===data.statusCode&&"ok"===data.message&&($scope.openeditImage=!1,$scope.editUser.avatar_url=$scope.location,$scope.location="",$scope.basicProfile())})},$scope.hidePreview=function(){$scope.location="",$scope.openeditImage=!1,$scope.fileModel=null;var bucketInstance=new AWS.S3,params={Bucket:"mindmaxdaffo",Key:$scope.imag};bucketInstance.deleteObject(params,function(err,data){})},$scope.cancelSave=function(index){switch(console.log("in",index),index){case 1:$scope.openeditImage=!1,$scope.basicProfile();break;case 2:$scope.openeditName=!1,$scope.basicProfile();break;case 3:$scope.openeditDob=!1,$scope.basicProfile();break;case 4:$scope.openeditEmail=!1,$scope.basicProfile();break;case 5:$scope.openeditPassword=!1,$scope.basicProfile()}},$scope.deleteMyAccount=function(){deleteAccountService["delete"]({id:APP.currentUser._id},function(data){200===data.statusCode&&"ok"===data.message&&"user deleted"===data.result.message?(localStorage.removeItem("loggedInUser"),$rootScope.isLoggedIn=!1,$state.go("home",{},{reload:!0})):($scope.errorDelete=!0,$scope.delError=frontendSettings.delError,$timeout(function(){$scope.errorDelete=!1},2e3))},function(error){console.log("delete",error)})}}]),app.factory("changeNameService",function($resource){return $resource(APP.endpoints.changeUserName,{id:"@id"},{update:{method:"PUT"}})}),app.factory("changeEmailService",function($resource){return $resource(APP.endpoints.changeUserEmail,{id:"@id"},{update:{method:"PUT"}})}),app.factory("changePasswordService",function($resource){return $resource(APP.endpoints.changeUserPass,{id:"@id"},{update:{method:"PUT"}})}),app.factory("changeUserDobService",function($resource){return $resource(APP.endpoints.changeUserDob,{id:"@id"},{update:{method:"PUT"}})}),app.factory("changeUserImageService",function($resource){return $resource(APP.endpoints.changeUserImage,{id:"@id"},{update:{method:"PUT"}})}),app.factory("deleteAccountService",function($resource){return $resource(APP.endpoints.deleteAccount,{id:"@id"},{update:{method:"PUT"}})}),app.controller("resetPasswordController",["$scope","$stateParams","resetPasswordService","$timeout",function($scope,$stateParams,resetPasswordService,$timeout){$scope.tokenId=$stateParams.user,$scope.submittedResetForm=!1,$scope.password={},$scope.resetLoader=!1,$scope.submitResetPassword=function(){if($scope.resetError="",$scope.submittedResetForm=!0,null===$scope.password.newpass||void 0===$scope.password.newpass)return focus("password1"),!1;if(null===$scope.password.conpass||void 0===$scope.password.conpass)return focus("password2"),!1;if($scope.password.conpass!==$scope.password.newpass)return focus("password2"),$scope.resetError="password did not match",$timeout(function(){$scope.resetError=""},3e3),!1;$scope.resetLoader=!0;var opts={};opts.access_token=$scope.tokenId,opts.password=$scope.password.newpass,opts.confirmPassword=$scope.password.newpass,resetPasswordService.save(opts,function(data){$scope.resetLoader=!1,200===data.statusCode&&"ok"===data.message?($scope.password={},$scope.submittedResetForm=!1,$scope.resetError="The Password has been changed with Success",$timeout(function(){$scope.resetError=""},3e3)):401===data.statusCode&&"unauthorized"===data.message||422===data.statusCode?($scope.resetError="You are not authorized for reset password",$timeout(function(){$scope.resetError=""},3e3)):($scope.resetError="Error occured in reset password",$timeout(function(){$scope.resetError=""},3e3))},function(error){console.log("error in forgot password")})}}]),app.factory("resetPasswordService",function($resource){return $resource(APP.endpoints.resetPassword)}),app.controller("viewSharedController",["$scope","$uibModalInstance","getViewActivityService","editActivityService","likeActivityService","unlikeActivityService","activityId","$uibModal","$timeout",function($scope,$uibModalInstance,getViewActivityService,editActivityService,likeActivityService,unlikeActivityService,activityId,$uibModal,$timeout){$scope.isLike=!1,$scope.isUnlike=!1,$scope.editDescription=!1,$scope.editDescriptionValue="",$scope.activityFormEditSubmitted=!1,$scope.showLike=!1;var opts={};$scope.viewDetailActivity={},$scope.activityLoader=!0,opts.id=activityId,getViewActivityService.query(opts,function(data){200===data.statusCode&&"ok"===data.message&&($scope.viewDetailActivity=data.result,$scope.getLike=data.result.likes.indexOf(APP.currentUser._id),-1===$scope.getLike?$scope.showLike=!1:$scope.showLike=!0,$scope.likedPeople=data.result.likes.length,$scope.activityLoader=!1)}),$scope.closeModal=function(){$scope.viewDetailActivity={},$scope.editDescription=!1,$scope.editDescriptionValue="",$scope.$emit("CallUpdatedCommunityMethod",{}),$scope.$emit("CallUpdatedSpaceMethod",{}),$uibModalInstance.dismiss("cancel")},$timeout(function(){$scope.loadMoreComments()},3e3),$scope.loadMoreComments=function(){var elmnt=document.getElementById("getHeight"),txt="Height including padding and border: "+elmnt.scrollHeight+"px<br>";console.log("Height",txt)},$scope.likeActivity=function(id,owner_id,likedPeople){var opts={};opts.activityOwner=owner_id,likeActivityService.update({id:id},opts,function(data){200===data.statusCode&&"ok"===data.message?($scope.isLike=!0,$scope.showLike=!0,$scope.isUnlike=!1,$scope.likedPeople=likedPeople+1):console.log("error",data)},function(error){console.log("errrr",error)})},$scope.unlikeActivity=function(id,owner_id,likedPeople){var opts={};opts.activityOwner=owner_id,unlikeActivityService.update({id:id},opts,function(data){200===data.statusCode&&"ok"===data.message?($scope.isLike=!1,$scope.showLike=!1,$scope.isUnlike=!0,$scope.likedPeople>0?$scope.likedPeople=likedPeople-1:$scope.likedPeople=likedPeople):console.log("error",data)},function(error){console.log("errrr",error)})},$scope.editDetail=function(){$scope.editDescription=!0,$scope.editDescriptionValue=$scope.viewDetailActivity.description},$scope.saveDetail=function(form,id){if($scope.activityFormEditSubmitted=!0,void 0===$scope.editDescriptionValue||""===$scope.editDescriptionValue)return focus("description"),!1;var opts={};opts.description=$scope.editDescriptionValue,editActivityService.query({id:id},opts,function(data){200===data.statusCode&&"ok"===data.message&&($scope.editDescription=!1,$scope.viewDetailActivity.description=$scope.editDescriptionValue)})},$scope.cancel=function(){$scope.editDescriptionValue="",$scope.editDescription=!1},$scope.openModal=function(id){console.log("nie",id);$uibModal.open({animation:$scope.animationsEnabled,size:"lg",templateUrl:"app/shared/activityDetail/detail.html",controller:"findPeopleController",scope:$scope,backdrop:"static",keyboard:!1,resolve:{activityId:function(){return id}}})}}]),app.controller("findPeopleController",["$rootScope","$uibModalInstance","$scope","$uibModal","$log","viewLikeUserService","activityId",function($rootScope,$uibModalInstance,$scope,$uibModal,$log,viewLikeUserService,activityId){console.log("in findPeopleController",activityId),$scope.listLikeUser=[],$scope.showUserLoader=!0,viewLikeUserService.query({id:activityId},function(data){200===data.statusCode&&"ok"===data.message&&(console.log("data",data),$scope.listLikeUser=data.result[0].likes,console.log("datalistLikeUser",$scope.listLikeUser),$scope.showUserLoader=!1)},function(){}),$scope.closeModal2=function(){console.log("closeModal2"),$uibModalInstance.dismiss("cancel")}}]),app.controller("commentsController",["$scope","postCommentService","postListCommentService","$timeout","deleteCommentService","editCommentService",function($scope,postCommentService,postListCommentService,$timeout,deleteCommentService,editCommentService){$scope.commentFormSubmitted=!1,$scope.commentList=[],$scope.errorComment=!1,$scope.notificationloader=!1,$scope.commentProcess=!1,$scope.hideAllComments=!1,$scope.remainingComments=0,$scope.fixedComment=!1,$scope.avatar=APP.currentUser.local.avatar_url,$scope.$watch("activityId",function(newValue,oldValue){$scope.activityId=newValue,$scope.UserId=APP.currentUser._id,$scope.commentList=[],$scope.getComments(1)}),$scope.getComments=function(index){var opts,limit_start=0,limit=6;opts=1==index?{id:$scope.activityId,skip:limit_start,limit:limit}:{id:$scope.activityId},$scope.notificationloader=!0,postListCommentService.query(opts,function(data){if(200===data.statusCode&&"ok"===data.message){$scope.notificationloader=!1,$scope.commentProcess=!1,$scope.commentList=data.result.comments;var elmnt=document.getElementById("commentBox"),txt="Height including padding and border: "+elmnt.scrollHeight+"px<br>";console.log("Height",txt),data.result.totalCount>data.result.comments.length&&($scope.remainingComments=data.result.totalCount-data.result.comments.length),2==index&&($scope.hideAllComments=!0)}else $scope.notificationloader=!1,$scope.commentList=[],$scope.commentProcess=!1})},$scope.postComment=function(){$scope.commentFormSubmitted=!0;var opts={};opts.user=APP.currentUser._id,$scope.errorComment=!1,opts.comment=$scope.txtcomment.trim(),opts.activity=$scope.activityId,postCommentService.save({id:$scope.activityId},opts,function(data){200===data.statusCode&&"ok"===data.message?($scope.commentList.push(data.result[0]),$scope.txtcomment="",$scope.commentFormSubmitted=!1):($scope.errorComment=!1,$scope.errCommentMessage=frontendSettings.errorOccured,$timeout(function(){$scope.errorComment=!1},3e3))})},$scope.deleteComment=function(index,id){$scope.loader[index]=!0,deleteCommentService["delete"]({id:$scope.activityId,commentId:id},function(data){200===data.statusCode&&"ok"===data.message&&($scope.commentList.splice(index,1),$scope.loader[index]=!0)},function(error){console.log("delete",error)})},$scope.commentLoading=[],$scope.editCommentText=[],$scope.isEditComment=[],$scope.activeCommentEdit=[],$scope.commentErrorMsg=[],$scope.commentErrorCls=[],$scope.updateComment=function(index,comment){$scope.commentLoading[index]=!0,$scope.activeCommentEdit=[],$scope.commentErrorMsg[index]="",$scope.commentErrorCls[index]="",$scope.isEditComment[index]=!1,$scope.editCommentText[index]=comment.comment,$scope.activeCommentEdit[index]=comment._id,$("#commentBox").hide()},$scope.cancelPost=function(index){$scope.commentLoading[index]=!1,$scope.commentLoading=[],$scope.editCommentText=[],$scope.isEditComment=[],$scope.activeCommentEdit=[],$scope.commentErrorMsg=[],$scope.commentErrorCls=[],$("#commentBox").show()},$scope.editComment=function(index,comment){$scope.commentErrorMsg[index]="",$scope.isEditComment[index]=!1;var newText=$scope.editCommentText[index];if(void 0===newText||""===newText)return $scope.commentErrorCls[index]="text-red",$scope.commentErrorMsg[index]="Can not save empty comment",$timeout(function(){$scope.commentErrorCls[index]="",$scope.commentErrorMsg[index]=""},8e3),!1;var opts1={};opts1.comment=newText,$scope.isEditComment[index]=!0,editCommentService.update({id:$scope.activityId,commentId:comment._id},opts1,function(data){200===data.statusCode&&"ok"===data.message?($scope.activeCommentEdit[index]="",$scope.commentErrorCls[index]="",$scope.commentErrorMsg[index]="",$scope.editCommentText[index]="",$scope.commentList[index].comment=newText,$scope.isEditComment[index]=!1,$("#commentBox").show()):($scope.commentInProcess[index]=!1,$scope.isEditComment[index]=!1,$scope.commentErrorCls[index]="text-red",$scope.commentErrorMsg[index]=frontendSettings.errorOccured,$("#commentBox").show()),$timeout(function(){$scope.commentErrorCls[index]="",$scope.commentErrorMsg[index]=""},8e3)},function(error){})},$scope.showAllComments=function(){$scope.commentProcess=!0,$scope.getComments(2)}}]),app.directive("commentsForm",["postListCommentService",function(postListCommentService){return{templateUrl:"app/shared/comments/commentsView.html",restrict:"E",scope:!0,link:function($scope,element,$attrs){$scope.activityId=$attrs.activityId},controller:"commentsController"}}]),app.factory("postCommentService",function($resource){return $resource(APP.endpoints.postComment)}),app.factory("postListCommentService",function($resource){return $resource(APP.endpoints.postComment,{},{query:{method:"GET",isArray:!1}})}),app.factory("deleteCommentService",function($resource){return $resource(APP.endpoints.updateComment,{id:"@id",commentId:"@commentId"},{"delete":{method:"DELETE"}})}),app.factory("editCommentService",function($resource){return $resource(APP.endpoints.updateComment,{id:"@id",commentId:"@commentId"},{update:{method:"PUT"}})}),app.controller("communityController",["$scope","$rootScope","getCommunityService","$uibModal","getViewActivityService",function($scope,$rootScope,getCommunityService,$uibModal,getViewActivityService){$scope.commloader=!0,$scope.activityList=[],$scope.mycommListShow=!1,AWS.config.region="ap-northeast-1",AWS.config.credentials=new AWS.CognitoIdentityCredentials({IdentityPoolId:"ap-northeast-1:13efca28-48cb-445d-9b50-882e3b055c2a"}),$scope.showCommunityList=function(){getCommunityService.query(function(data){$scope.commloader=!1,200===data.statusCode&&"ok"===data.message&&(data.result.length>0?($scope.mycommListShow=!1,$scope.activityList=data.result):$scope.mycommListShow=!0)},function(error){console.log("error",error)})},$scope.showCommunityList(),$scope.viewActivity=function(activityId){if($rootScope.isLoggedIn===!1)$scope.$emit("ShowModalLogin",{});else{$uibModal.open({animation:$scope.animationsEnabled,size:"lg",templateUrl:"app/shared/activityDetail/viewSharedActivity.html",controller:"viewSharedController",scope:$scope,backdrop:"static",keyboard:!1,resolve:{activityId:function(){return angular.copy(activityId)}}})}},$scope.$on("callViewActivityLike",function(event,args){$scope.id=args.id,console.log($scope.id),$scope.viewActivity($scope.id)}),$scope.loadMore=function(){console.log("gggg")}}]),app.directive("community",function(){return{templateUrl:"app/shared/community/communityView.html",restrict:"E",controller:"communityController"}}),app.factory("getCommunityService",function($resource){return $resource(APP.endpoints.createActivity,{},{query:{method:"GET",isArray:!1}})}),app.factory("getViewActivityService",function($resource){return $resource(APP.endpoints.viewActivity,{},{query:{method:"GET",isArray:!1}})}),app.factory("likeActivityService",function($resource){return $resource(APP.endpoints.likeActivity,{id:"@id"},{update:{method:"PUT"}})}),app.factory("unlikeActivityService",function($resource){return $resource(APP.endpoints.unlikeActivity,{id:"@id"},{update:{method:"PUT"}})}),app.factory("removeActivityService",function($resource){return $resource(APP.endpoints.deleteActivity,{id:"@id"},{remove:{method:"DELETE"}})}),app.factory("editActivityService",function($resource){return $resource(APP.endpoints.editActivity,{id:"@id"},{query:{method:"PUT"}})}),app.factory("viewLikeUserService",function($resource){return $resource(APP.endpoints.getListLike,{},{query:{method:"GET",isArray:!1}})}),app.directive("myGroup",function(){return{templateUrl:"app/shared/group/groupView.html",restrict:"E",controller:""}}),app.controller("headerController",["$rootScope","$scope","$uibModal","$log","getNotificationService","viewAllNotificationService","viewOneNotificationService",function($rootScope,$scope,$uibModal,$log,getNotificationService,viewAllNotificationService,viewOneNotificationService){$scope.showRegForm=!1,$scope.animationsEnabled=!0,$scope.showDropMenu=!1,$scope.skip=0,$scope.showAllNotificationList=[],$scope.notificationloader=!1,$scope.showRegisterForm=function(){$scope.$broadcast("CallParamsCloseMethod",{}),$scope.showRegForm=!0;var modalInstance=$uibModal.open({animation:$scope.animationsEnabled,templateUrl:"app/shared/register/registerView.html",controller:"registerController",scope:$scope,backdrop:"static",keyboard:!1});modalInstance.result.then(function(selectedItem){$scope.selected=selectedItem},function(){$log.info("Modal dismissed at: "+new Date)})},$scope.menuAccount=function(){$scope.showDropMenu=!0},$scope.cancel=function(){$uibModal.dismiss("cancel")},$scope.$on("ShowModalLogin",function(){$scope.showRegisterForm()}),$rootScope.$on("callHeaderController",function(event,value){$scope.backToLessons=value}),$scope.listResponse=1,$scope.allTotal=0,$scope.getAllNotificationShow=function(){var limit_start=$scope.showAllNotificationList.length,limit=5;($scope.allTotal>limit_start||0===$scope.allTotal)&&1===$scope.listResponse&&($scope.listResponse=0,$scope.notificationloader=!0,getNotificationService.query({id:APP.currentUser._id,skip:limit_start,limit:limit},function(data){$scope.listResponse=1,200===data.statusCode&&"ok"===data.message?($scope.notificationloader=!1,$scope.getNotificationShow=!0,$scope.allTotal=data.result.totalCount,$scope.showAllNotificationList=$scope.showAllNotificationList.concat(data.result.notifications)):($scope.notificationloader=!1,$scope.getNotificationShow=0,$scope.showAllNotificationList=[],$scope.allTotal=0)},function(error){console.log("error",error)}))},$scope.seenAllMessage=function(){$scope.getTotalNotification>0&&viewAllNotificationService.update({id:APP.currentUser._id},function(data){200===data.statusCode&&"ok"===data.message&&$scope.$emit("callTotalNotification",{})},function(){})},$scope.removeNotification=function(index){},$scope.viewLikeActivity=function(index,id,notiId){$scope.getNotificationShow=!0,$scope.showAllNotificationList[index].status="seen",$("#activity-noti-"+index).removeClass("unread-noti").addClass("read-noti"),$scope.$broadcast("callViewActivityLike",{id:id}),viewOneNotificationService.update({id:APP.currentUser._id,nid:notiId},function(data){},function(){})},$scope.loadMoreNoti=function(){console.log("loadMoreNoti"),$scope.getAllNotificationShow()}}]),app.directive("header",function(){return{templateUrl:"app/shared/header/headerView.html",restrict:"E",controller:"headerController"}}),app.factory("getStatistics",function($resource){return $resource(APP.endpoints.statistics,{},{query:{method:"GET",isArray:!1}})}),app.factory("getNotificationService",function($resource){return $resource(APP.endpoints.getNotification,{},{query:{method:"GET",isArray:!1}})}),app.factory("viewAllNotificationService",function($resource){return $resource(APP.endpoints.viewAllNotification,{id:"@id"},{update:{method:"PUT"}})}),app.factory("viewOneNotificationService",function($resource){return $resource(APP.endpoints.viewOneNotification,{id:"@id",nid:"@nid"},{update:{method:"PUT"}})}),app.factory("actionService",function($resource){return $resource(APP.endpoints.actions)}),app.factory("actionUserService",function($resource){return $resource(APP.endpoints.actionUser,{id:"@id",actionId:"@actionId"},{query:{method:"PUT"}})}),app.factory("createActivity",function($resource){return $resource(APP.endpoints.createActivity)}),app.factory("moduleCommunityService",function($resource){return $resource(APP.endpoints.moduleCommunity)}),app.factory("lessonCommunityService",function($resource){return $resource(APP.endpoints.lessonCommunity)}),app.factory("completedLessonService",function($resource){return $resource(APP.endpoints.completedLesson)}),app.controller("modulesController",["$scope","$rootScope","$timeout","moduleService","lessonService","lessonDetailService","actionService","actionUserService","createActivity","$uibModal","$state","moduleCommunityService","lessonCommunityService","completedLessonService","$window",function($scope,$rootScope,$timeout,moduleService,lessonService,lessonDetailService,actionService,actionUserService,createActivity,$uibModal,$state,moduleCommunityService,lessonCommunityService,completedLessonService,$window){$scope.modules=[],$scope.lesson="",$scope.lessonDetail="",$scope.loader=!1,$scope.actionlist=!1,$scope.showActivity=!1,$scope.activityFormSubmitted=!1,$scope.lessonSeeMore=!1,$scope.selectAction=[],$scope.activity={},$scope.shareLoader=!1,$scope.module_id="",$scope.mycommListShow=!1,$scope.noFile="",$scope.successAct=!1,$scope.activityError=!1,$scope.lenAction=!1,$scope.uploadLoader=!1,$scope.showLesson=!1,$scope.delImage=!1,$scope.uploadSuccess=!1,AWS.config.region="ap-northeast-1",AWS.config.credentials=new AWS.CognitoIdentityCredentials({IdentityPoolId:"ap-northeast-1:13efca28-48cb-445d-9b50-882e3b055c2a"}),$scope.$on("CallParamsCloseMethod",function(){$scope.closeLessonModal()}),$scope.closeLessonModal=function(){$scope.actionlist=!1,$scope.showActivity=!1};moduleService.query(function(data){$scope.modules=data.result});$scope.showAction=function(id){$rootScope.isLoggedIn===!1?($scope.actionlist=!1,$scope.showActivity=!1,$scope.$emit("ShowModalLogin",{})):($scope.selectAction=[],$scope.actionlist=!0,$scope.dataAction=[],$scope.noActionList=!1,$scope.loader=!0,$scope.showActivity=!0,opts={},opts.id=id,actionService.get(opts,function(data){200===data.statusCode&&"ok"===data.message&&(data.result.length>0?($scope.dataAction=data.result,$scope.showactionList=!0,$scope.loader=!1):($scope.showactionList=!1,$scope.noActionList=!0,$scope.loader=!1))},function(error){console.log("error",error)}))},$scope.toggleCheckAction=function(id,moduleId){var filtered=$scope.selectAction.filter(function(element,index){return element.id==id?index+1:void 0});filtered.length?$scope.selectAction.splice($scope.selectAction.indexOf(filtered[0]),1):$scope.selectAction.push({id:id,moduleId:moduleId})},$scope.saveAction=function(id,lessonId){if($scope.lenAction=!1,$scope.actionLoader=!1,$scope.successAction=!1,0===$scope.selectAction.length)$scope.lenAction=!0;else{$scope.actionLoader=!0;for(var i=0;i<$scope.selectAction.length;i++){var last=i==$scope.selectAction.length-1?1:0;$scope.saveUserActions(last,lessonId,$scope.selectAction[i].id,$scope.selectAction[i].moduleId)}}},$scope.saveUserActions=function(last,lessonId,id,moduleId){var opts={};opts.lesson=lessonId,opts.user=APP.currentUser._id,opts.action=id,opts.module=moduleId,actionUserService.query({id:lessonId,actionId:id},opts,function(data){200===data.statusCode&&"ok"===data.message?1===last&&($scope.actionLoader=!1,$scope.successAction=!0,$timeout(function(){$scope.successAction=!1,$scope.showAction(lessonId)},3e3)):console.log("error",data)},function(error){console.log("error1",error)})},$scope.expandLesson=function(Id){angular.element("#fadein").removeClass("color-overlay"),$scope.showactionList=!1,$scope.showActivity=!1,
$scope.showLesson=!1,$scope.loader=!0,lessonService.get({id:Id},function(data){$scope.loader=!1,$scope.lesson=data.result,$scope.lesson.length>0&&($scope.showLesson=!0),moduleCommunityService.get({id:Id},function(data){data.result.length>0?($scope.activityList=data.result,$scope.mycommListShow=!1):($scope.activityList=data.result,$scope.mycommListShow=!0)})},function(error){console.log("erorr")})},$scope.getlessonDetail=function($event,id,completeAttr){$scope.noFile="",$scope.activity={},angular.element("#fileUploaded").val(null),$scope.activityList=[],$scope.mycommListShow=!1,$scope.activityFormSubmitted=!1,$event.stopPropagation(),angular.element("#fadein").addClass("color-overlay"),$scope.showActivity=!0,$scope.actionlist=!1,completeAttr===!0?$("#completeDft").attr("disabled","disabled"):$("#completeDft").removeAttr("disabled"),lessonDetailService.get({id:id},function(data){200==data.statusCode?($scope.lessonDetail=data.result,$scope.module_id=$scope.lessonDetail.module,$scope.Keytakeaways=$scope.lessonDetail.Keytakeaways?$scope.lessonDetail.Keytakeaways.split("."):[],lessonCommunityService.get({id:id},function(data){data.result.length>0?($scope.activityList=data.result,$scope.mycommListShow=!1):($scope.mycommListShow=!0,$scope.activityList=data.result)})):console.log("in else part")})},$scope.finishLesson=function(id,moduleId){if($rootScope.isLoggedIn===!1)$scope.actionlist=!1,$scope.showActivity=!1,$scope.$emit("ShowModalLogin",{});else{var opts={};opts.user=APP.currentUser._id,opts.lesson=id,completedLessonService.save(opts,function(data){"ok"===data.message&&200===data.statusCode&&($scope.closeLessonDetail(),$scope.expandLesson(moduleId))},function(error){console.log("error")})}},$scope.closeLessonDetail=function(){$scope.showactionList=!1,$scope.activity.description="",$scope.showActivity=!1,angular.element("#fadein").removeClass("color-overlay")},$scope.switchLessonDescription=function(){$scope.lessonSeeMore=$scope.lessonSeeMore?!1:!0},$scope.closeActionDetail=function(){$scope.actionlist=!1},$scope.hidePreview=function(){$scope.activity.location="",$scope.activity.fileModel=null;var bucketInstance=new AWS.S3,params={Bucket:"mindmaxdaffo",Key:$scope.imag};bucketInstance.deleteObject(params,function(err,data){})},$scope.confirmClick=function(){},$scope.upload=function(element){if($rootScope.isLoggedIn===!1)$scope.actionlist=!1,$scope.showActivity=!1,$scope.$emit("ShowModalLogin",{});else if($scope.noFile="",$scope.delImage=!1,$scope.imag="",$scope.uploadSuccess=!1,$scope.showProgressBar=!1,$scope.activity.fileModel=element.files[0],$scope.uploadLoader=!1,$scope.activity.fileModel)if("image/jpeg"===$scope.activity.fileModel.type||"image/png"===$scope.activity.fileModel.type){$scope.uploadLoader=!0;var bucket=new AWS.S3({params:{Bucket:"mindmaxdaffo"}}),imageName=$scope.activity.fileModel.name+Math.floor(Date.now()/1e3);$scope.imag=imageName;var params={Key:imageName,ContentType:$scope.activity.fileModel.type,Body:$scope.activity.fileModel};bucket.upload(params).on("httpUploadProgress",function(evt){$scope.barShow=parseInt(100*evt.loaded/evt.total)+"%",$scope.percentageStyle={width:$scope.barShow},$scope.$digest()}).send(function(err,data){err?($scope.uploadLoader=!1,$scope.noFile="Error in uploading file, please try again",$scope.$digest(),$timeout(function(){$scope.noFile=""},3e3)):($scope.uploadLoader=!1,$scope.uploadSuccess=!0,$scope.activity.location=data.Location,$scope.delImage&&($scope.hidePreview(),$scope.activity.location="",$scope.activity.fileModel=null),$scope.showProgressBar=!0,$timeout(function(){$scope.noFile=""},3e3),$scope.barShow="0%",element.value=null,$scope.$digest())})}else $scope.noFile="Please upload a image with jpeg and png format";else $scope.noFile="Please upload a file first";return $scope.activity.location},$scope.createActivityItem=function(i,lesson_id,module_Id){if($scope.delImage=!1,$rootScope.isLoggedIn===!1)$scope.actionlist=!1,$scope.showActivity=!1,$scope.$emit("ShowModalLogin",{});else{if($scope.activityFormSubmitted=!0,void 0===$scope.activity.description||""===$scope.activity.description)return focus("description"),!1;if($scope.uploadLoader===!0&&($window.confirm(frontendSettings.confirmPostActivity)?($scope.uploadLoader=!1,$scope.delImage=!0,$scope.activity.location="",$scope.activity.fileModel=null,$scope.showProgressBar=!1):$scope.showActivity=!0),!$scope.activity.fileModel||$scope.uploadSuccess){$scope.showActivity=!1;var modalInstance=$uibModal.open({animation:$scope.animationsEnabled,templateUrl:"app/shared/shareActivity/shareActivityView.html",controller:"ModalController",scope:$scope,backdrop:"static",keyboard:!1})}$scope.postActivity=function(i,mygroupcheck){var opts={};opts.user=APP.currentUser._id,opts.lesson=lesson_id,opts.type="image",opts.description=$scope.activity.description,""===$scope.activity.location||void 0===$scope.activity.location?opts.url="":opts.url=$scope.activity.location,opts.module=$scope.module_id,createActivity.save(opts,function(data){$scope.shareLoader=!1,200===data.statusCode&&"ok"===data.message?(void 0===mygroupcheck||mygroupcheck===!1?($scope.successAct=!0,$scope.successActMsg=frontendSettings.shareCom):($scope.successAct=!0,$scope.successActMsg=frontendSettings.shareGroup),$scope.module_id="",$scope.activity={},$scope.showProgressBar=!1,angular.element("#fileUploaded").val(null),$timeout(function(){$scope.successAct=!1,modalInstance.dismiss("cancel"),$scope.expandLesson(module_Id),$scope.$broadcast("CallUpdatedCommunityMethod",{}),$scope.$broadcast("CallUpdatedSpaceMethod",{}),$rootScope.getStatistics()},1800)):($scope.activityError=!0,$scope.showProgressBar=!1,$timeout(function(){$scope.activityError=!1,modalInstance.dismiss("cancel"),$scope.expandLesson(module_Id)},1800))},function(error){$scope.activityError=!0,$timeout(function(){$scope.activityError=!1,modalInstance.dismiss("cancel"),$state.go("home",{},{reload:!0})},1800)})}}}}]),app.directive("modulesList",function(){return{templateUrl:"app/shared/modules/modulesView.html",restrict:"E",controller:"modulesController"}}),app.controller("myspaceController",["$scope","getspaceService","getViewActivityService","$uibModal","removeActivityService",function($scope,getspaceService,getViewActivityService,$uibModal,removeActivityService){$scope.spaceloader=!0,$scope.mySpaceList=[];var opts={};opts.id=APP.currentUser._id,$scope.mySpaceMsg=!0,$scope.showSpaceList=function(){getspaceService.query(opts,function(data){$scope.spaceloader=!1,200===data.statusCode&&"ok"===data.message&&data.result.length>0&&($scope.mySpaceList=data.result,$scope.mySpaceMsg=!1)},function(error){console.log("error",error)})},$scope.showSpaceList(),$scope.$on("CallUpdatedSpaceMethod",function(){$scope.showSpaceList()}),$scope.viewActivitySpace=function(activityId){$uibModal.open({animation:$scope.animationsEnabled,size:"lg",templateUrl:"app/shared/activityDetail/viewSharedActivity.html",controller:"viewSharedController",scope:$scope,resolve:{activityId:function(){return angular.copy(activityId)}}})},$scope.deleteMyActivity=function($event,id,url){$event.stopPropagation(),removeActivityService.remove({id:id},function(data){if(200===data.statusCode&&"ok"===data.message&&($scope.showSpaceList(),url)){var res=url.split("com/");console.log("re",res);var bucketInstance=new AWS.S3,params={Bucket:"mindmaxdaffo",Key:res[1]};bucketInstance.deleteObject(params,function(err,data){})}})}}]),app.directive("mySpace",function(){return{templateUrl:"app/shared/myspace/myspaceView.html",restrict:"E",controller:"myspaceController"}}),app.factory("getspaceService",function($resource){return $resource(APP.endpoints.mySpace,{id:"@id"},{query:{method:"GET",isArray:!1}})}),app.controller("registerController",["$scope","$uibModalInstance","registerService","focus","signupService","loginService","profileService","$state","$rootScope","$uibModal","forgotPasswordService","$timeout",function($scope,$uibModalInstance,registerService,focus,signupService,loginService,profileService,$state,$rootScope,$uibModal,forgotPasswordService,$timeout){$scope.showLoginForm=!0,$scope.showRegForm=!1,$scope.showErrEmail=!1,$scope.formSubmitted=!1,$scope.loginFormSubmitted=!1,$scope.user={},$scope.forgot={},$scope.signupStart=!1,$scope.userNotFound=!1,$scope.userPassWrong=!1,$scope.showForgotPass=!1,$scope.msgShow="",$scope.forgotLoader=!1,$scope.forgotmessage="",$scope.showLogin=function(){$scope.user={},$scope.dt="",$scope.showLoginForm=!0,$scope.showRegForm=!1,$scope.formSubmitted=!1,$scope.loginFormSubmitted=!1},$scope.popup1={opened:!1},$scope.dateOptions={formatYear:"yy",startingDay:1,showWeeks:"false"},$scope.format="dd-MMMM-yyyy",$scope.disabled=function(date,mode){return"day"===mode&&(0===date.getDay()||6===date.getDay())},$scope.altInputFormats=["M!/d!/yyyy"],$scope.maxDate=new Date,$scope.toggleMin=function(){$scope.minDate=null},$scope.open1=function(){$scope.popup1.opened=!0},$scope.toggleMin(),$scope.showRegister=function(){$scope.user={},$scope.dt="",$scope.showRegForm=!0,$scope.showLoginForm=!1,$scope.formSubmitted=!1,$scope.loginFormSubmitted=!1},$scope.emailValidate=function(){$scope.showErrEmail=!1,$scope.errMsg="",void 0===$scope.user.email||registerService.save({email:$scope.user.email},function(data){200==data.statusCode&&"ok"==data.message&&"verified"==data.result.message||(422==data.statusCode&&"email already registered"==data.message?($scope.showErrEmail=!0,$scope.errMsg=frontendSettings.userregistered):422==data.statusCode&&"email should be registered with any email provider"==data.message?($scope.showErrEmail=!0,$scope.errMsg=frontendSettings.domainnotValid):($scope.showErrEmail=!0,$scope.errMsg=frontendSettings.errorOccured))})},$scope.convert=function(str){var date=new Date(str),mnth=("0"+(date.getMonth()+1)).slice(-2),day=("0"+date.getDate()).slice(-2);return[day,mnth,date.getFullYear()].join("/")},$scope.login=function(){if($scope.loginFormSubmitted=!0,$scope.loginStart=!1,void 0===$scope.user.email||""===$scope.user.email)return focus("uname"),!1;if(void 0===$scope.user.password||""===$scope.user.password)return focus("password"),!1;var opts1={};$scope.loginStart=!0,opts1.email=$scope.user.email,opts1.password=$scope.user.password,loginService.save(opts1,function(data){200==data.statusCode&&"ok"===data.message?($scope.loginStart=!1,APP.currentUser=data.result,localStorage.setItem("loggedInUser",JSON.stringify(data.result)),$rootScope.isLoggedIn=!0,$uibModalInstance.dismiss("cancel"),$state.go("home",{},{reload:!0})):422==data.statusCode&&data.message.email===!1&&data.message.password===!1?($scope.loginStart=!1,$scope.userNotFound=!0,$scope.msgShow="User not found",$timeout(function(){$scope.msgShow=""},3e3)):422==data.statusCode&&data.message.email===!0&&data.message.password===!1?($scope.loginStart=!1,$scope.userPassWrong=!0,$scope.msgShow="Password is wrong",$timeout(function(){$scope.msgShow=""},3e3)):$scope.loginStart=!0},function(error){console.log("error ",data)})},$scope.forgotPassword=function(){$scope.showForgotPass=!0,$scope.showLoginForm=!1,$scope.showRegForm=!1},$scope.forgotPasswordSave=function(){if($scope.forgotSubmitted=!0,$scope.forgotmessage="",void 0===$scope.forgot.email||null===$scope.forgot.email)return!1;$scope.forgotLoader=!0;var opts={};opts.email=$scope.forgot.email,opts.url=APP.resetPasswordUrl,forgotPasswordService.save(opts,function(data){$scope.forgotLoader=!1,200===data.statusCode&&"ok"===data.message?($scope.forgotmessage="Email send successfully on your email-id",$scope.forgot={},$scope.forgotSubmitted=!1):$scope.forgotmessage="Email not registered"},function(error){console.log("error in forgot password")})},$scope.submitRegistration=function(){if($scope.formSubmitted=!0,$scope.sucessMessage=!1,$scope.dob="",$scope.dt&&($scope.dob=$scope.convert($scope.dt)),void 0===$scope.user.name||""===$scope.user.name)return focus("uname"),!1;if(void 0===$scope.dob||""===$scope.dob)return focus("dob"),!1;if(void 0===$scope.user.email||""===$scope.user.email)return focus("email"),!1;if(void 0===$scope.user.password||""===$scope.user.password)return focus("password"),!1;if($scope.showErrEmail===!0)return focus("email"),!1;$scope.signupStart=!0;var opts={};opts.email=$scope.user.email,opts.password=$scope.user.password,opts.dob=$scope.dob,opts.name=$scope.user.name,signupService.save(opts,function(data){200==data.statusCode&&"ok"===data.message?($scope.sucessMessage=!0,$scope.signupStart=!1,$scope.login()):422==data.statusCode&&data.message.email===!1?($scope.signupStart=!1,$scope.showErrEmail=!0,$scope.errMsg=frontendSettings.userregistered):$scope.signupStart=!0},function(error){console.log("error",error)})},$scope.closeModal=function(){$uibModalInstance.dismiss("cancel"),angular.element("#fadein").removeClass("color-overlay")},$scope.facebookLogin=function(){window.location.href=APP.facebookLogin},$scope.twitterLogin=function(){window.location.href=APP.twitterLogin}}]),app.directive("registerForm",function(){return{templateUrl:"app/shared/register/registerView.html",restrict:"E",controller:"registerController"}}),app.factory("registerService",function($resource){return $resource(APP.endpoints.validateEmail)}),app.factory("signupService",function($resource){return $resource(APP.endpoints.signup)}),app.factory("loginService",function($resource){return $resource(APP.endpoints.login)}),app.factory("profileService",function($resource){return $resource(APP.endpoints.profile,{},{query:{method:"GET",isArray:!1}})}),app.factory("logoutService",function($resource){return $resource(APP.endpoints.logout)}),app.factory("isAuthenticated",function($resource){return $resource(APP.endpoints.isAuthenticated,{},{query:{method:"GET",isArray:!1}})}),app.factory("forgotPasswordService",function($resource){return $resource(APP.endpoints.forgotPassword)}),app.controller("ModalController",["$scope","$uibModalInstance",function($scope,$uibModalInstance){$scope.$on("closeModal",function(){$uibModalInstance.dismiss("cancel")}),$scope.closeModal=function(){$uibModalInstance.dismiss("cancel")},$scope.closePostActivityModal=function(){$uibModalInstance.dismiss("cancel"),angular.element("#fadein").removeClass("color-overlay")}}]);